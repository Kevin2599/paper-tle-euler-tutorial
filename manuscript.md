Avoiding common pitfalls in Euler deconvolution of potential field data
=======================================================================

### Leonardo Uieda, Vanderlei C. Oliveira Jr., and Valéria C. F. Barbosa

*Leonardo Uieda ([leouieda@gmail.com](mailto:leouieda@gmail.com)),
Observatório Nacional, Rio de Janeiro, RJ, Brazil*

*Vanderlei C. Oliveira Jr.,
Observatório Nacional, Rio de Janeiro, RJ, Brazil*

*Valéria C. F. Barbosa,
Observatório Nacional, Rio de Janeiro, RJ, Brazil*

----

In this tutorial
we'll talk about
a widely use method
of interpretation for potential field data
called Euler deconvolution.
The goal is to
demonstrate its usefulness
and, most importantly,
call attention to
common pitfalls encountered
in the interpretation of the results.
Since this is a tutorial,
all of the code and synthetic data
required to reproduce these results
are described step-by-step
in IPython notebooks
(http://www.ipython.org).
You can also download the synthetic data used
and the notebook that generates it
from (LINK TO FIGSHARE).
The code that runs the examples bellow
and produces the figures
is avaible at (LINK TO FIGSHARE).
We encourage you to download the data
and try it
on your software of choice.
For this tutorial we'll use
the implementation in
the open-source Python package
Fatiando a Terra (http://www.fatiando.org).

# Brief overview

Euler deconvolution
was first developed by @Thompson1982
under the name "EULDPH".
It was later extended
and given its current name
by @Reid1990.
Since then,
it has been adapted and improved upon
by @Keating1998,
@Mushayandebvu2004,
and
@Florio2013,
to name a few.
This popularity is largely due to its
the great simplicity of
implementation and use,
making it the tool of choice for
a quick initial interpretation of
potential field data.

In many cases,
maps of gravity and magnetic data
(and transformations thereof)
provide good constraints on
the horizontal location of an anomaly source.
Euler deconvolution is
a fast and simple technique
that is able to add
an extra dimension to
the interpretation.
It estimates
a set of (x, y, z) points
that ideally fall inside
the source of the anomaly.
Additionally,
some extensions to Euler deconvolution
are able to estimate a parameter
called the *structural index* (SI)
of the source.
This structural index is a number
that is related to
the ideal form of the source.
For example,
in the case of total field magnetic anomaly data,
a sphere is represented by an SI of 3,
whereas a dike is represented by an SI of 1.
Thus,
the structural index can tell us
which ideal geometric shape
more closely resembles the source.
Structural index estimation
is a subject of its own
and will not be covered here.
We refer the reader to
@Barbosa1999
and
@Melo2013
for more information.

# An example with synthetic data

The best way to
fully grasp the usefulness and limitations
of any geophysical method
is to apply it in a controlled setting
using synthetic (or modeled) data.
To make things more interesting,
we'll apply the deconvolution
on data generated by a model
that differs slightly from ideal sources
(Figure 1).

Let's see how
we can use Fatiando a Terra to
run the deconvolution on our data.
The first thing to do
is load (or `import` in Python)
the required modules from Fatiando.
After that,
we need to calculate
the 3 directional derivatives
of the potential field
(required for the deconvolution).
For gridded data,
this can be done easily enough
with the Fourier transform.
Assuming that the data
has been loaded into Numpy arrays
`x`, `y`, `z` with the x, y, z coordinates of each data point
and
`data` with our magnetic data
(see the accompanying notebook):

    from fatiando.gravmag import fourier, euler
    from fatiando import utils
    # Need data in SI units
    data_si = utils.nt2si(data)
    # shape = (ny, nx) number of points in y and x
    dx = fourier.derivx(x, y, data_si, shape)
    dy = fourier.derivy(x, y, data_si, shape)
    dz = fourier.derivz(x, y, data_si, shape)


# Last few words of caution

Recall that Euler deconvolution
estimates points that
ideally fall somewhere inside the source.
Where, exactly,
depends on the kind of source.
For spheres,
the points fall close to the center of mass.
For dikes and vertical cylinders (pipes),
the points fall along the top.
Keep in mind, though,
that these are the *ideal* locations
for simple sources.
In reality,
sources are often far from ideal
and estimated points will
present a spread from these locations
by varying amounts.

We emphasize that
Euler deconvolution solutions
**do not** represent
the three-dimensional outline
of the sources.
This is a common mistake among novices
and is made worse by
an overconfidence in the results.
It is crucial to remember that
Euler solutions are subject to
non-uniqueness and bias
just like any other geophysical inverse problem.


![Polygonal prism model (a) and synthetic total field anomaly data (b).
\label{fig:data-model}](
fig/data-model-low.png)

![Euler deconvolution solutions for varying structural index (SI) and moving
window size. \label{fig:solutions}](
fig/euler-solutions-low.png)

![Euler deconvolution solutions for a moving window of 3 km and structural
index 3. \label{fig:solutions-3d}](
fig/euler-solutions-3d-composite-low.png)



References
----------


